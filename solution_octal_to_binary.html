<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="js/jquery-3.1.0.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/solution-common.js"></script>
    <script>
        $(document).ready(function() {
            $("form").submit(function(event) {
                event.preventDefault();

                // base whare to convert
                var toBase = 2;
                // base where from convert
                var fromBase = 8;

                var op1 = $("#operand1").val();

                var len = op1.length;

                var htmlString = "<div class=\"ques-card\" id=\"question\"><p>" +
                    "(" + op1 + ")<sub>" + fromBase + "</sub> কে বাইনারি সংখ্যা পদ্ধতিতে রূপান্তর করতে হবে।" +
                    "</p></div>";

                var radixPoint = op1.indexOf(".");

                if (radixPoint != -1) {
                    if (radixPoint == 0 || radixPoint == len - 1) {
                        $(".step-body").html("<div class=\"card\" id=\"question\">" +
                            "<h1>ত্রুটি!</h1>" +
                            "<p>ইনপুট চেক কর!</p>" +
                            "</div>");

                        // Scroll Down to result
                        $('html, body').animate({
                            scrollTop: $("#question").offset().top - 10
                        }, 500);

                        return;
                    }
                }

                var intPart = "",
                    fractionPart = "",
                    valIntPart = 0,
                    valFractionPart = 0;
                if (radixPoint != -1) {
                    // If radix point found then,
                    intPart = op1.slice(0, radixPoint);
                    valIntPart = Number(intPart);

                    fractionPart = op1.slice(radixPoint, len);
                    valFractionPart = Number(fractionPart);

                } else {
                    intPart = op1;
                    valIntPart = Number(intPart);

                    radixPoint = len;
                }

                htmlString += "<h3 class='step'>সমাধান</h3>";

                // 1101.1011
                //   1   3   5   .   5   4   2
                //   ↓   ↓   ↓   ↓   ↓   ↓   ↓
                //  001 011 101  .  101 100 010

                htmlString += "<div class=\"multi-card\">" +
                    "<pre class=\"example\">";

                // Step 1
                var temp = " ";
                var counter = radixPoint - 1;
                for (var i = 0; i < len; i++) {
                    // if (op1.charAt(i) == ".")
                    //     continue;
                    temp += op1.charAt(i);
                    counter--;
                    if (i < len - 1) {
                        temp += "   ";
                    }
                }

                htmlString += temp;

                // Step 2
                var temp = "\n ";
                var counter = radixPoint - 1;
                for (var i = 0; i < len; i++) {
                    // if (op1.charAt(i) == ".")
                    //     continue;
                    temp += "↓";
                    counter--;
                    if (i < len - 1) {
                        temp += "   ";
                    }
                }

                htmlString += temp;

                // Step 3
                var finalVal = "";
                var temp = "\n";
                var counter = radixPoint - 1;
                for (var i = 0; i < len; i++) {
                    if (op1.charAt(i) == ".") {
                        finalVal += ".";
                        temp += " .  ";
                        continue;
                    }
                    finalVal += makeFixedLength(DecimalToBinary(op1.charAt(i)), 3);
                    temp += makeFixedLength(DecimalToBinary(op1.charAt(i)), 3);
                    counter--;
                    if (i < len - 1) {
                        temp += " ";
                    }
                }

                htmlString += temp;

                htmlString += "</pre><div class=\"desc-bottom\">" +
                    "<pre>(" + op1 + ")<sub>" + fromBase + "</sub> = (" + finalVal + ")<sub>" + toBase + "</sub></pre>";

                htmlString += "</div></div>";

                // ------------------------------------------------

                $(".step-body").html(htmlString);

                // Scroll Down to result
                $('html, body').animate({
                    scrollTop: $("#question").offset().top - 10
                }, 500);

            });

        });
    </script>
    <title>১.২.৩ অক্টাল থেকে বাইনারি সমাধান</title>
</head>

<body>
    <div class="body-content">

        <form class="form">
            <div class="desc-top">
                <p>
                    নিচের বাক্সে অক্টাল সংখ্যা লিখ এবং <kbd>রূপান্তর</kbd> বাটনে ক্লিক কর।
                </p>
                <p>
                    সর্বোচ্চঃ 16 digit (Radix point সহ)
                </p>
            </div>
            <div class="input-elements">
                <input id="operand1" value="71.52" type="text" pattern="\b([0-7]){1,8}[.]?([0-7]){0,8}\b" title="Only numbers and maximum 16 digit." required></br>
                <input class="button" name="submit" type="submit" value="রূপান্তর">
            </div>
        </form>

        <div class="step-body"></div>

    </div>

    <div class="nav bottom">
        <a class="button prev" href="#"></a>
        <!-- <a class="button next" href="#"></a> -->
    </div>

</body>

</html>
